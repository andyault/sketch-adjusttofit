{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/index.js","webpack://exports/./src/util.js","webpack://exports/external \"sketch\""],"names":["sketch","require","util","app","adjustSelected","document","getSelectedDocument","layers","selectedLayers","results","adjustLayers","UI","message","resultsString","adjustNested","nested","forEach","layer","layerResults","nestedResults","cat","hasOwnProperty","failed","oldHeight","sketchObject","frame","height","result","adjustToFit","newHeight","type","toLowerCase","adjustTextToFit","oldY","y","newY","fragments","rect","reduce","sum","frag","numFailed","numUnaffected","unaffected","plurals","num","push","pluralize","ret","length","commify","join","module","exports","string","arr","last","pop"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","//deps\nconst sketch = require('sketch');\nconst util = require('./util');\n\n//global object\nvar app = {};\n\n//public methods\n/**\n * call adjustToFit on the selected layers\n */\napp.adjustSelected = function() {\n\tlet document = sketch.getSelectedDocument();\n\tlet layers = document.selectedLayers;\n\n\tlet results = app.adjustLayers(layers, false);\n\n\tsketch.UI.message(app.resultsString(results));\n};\n\n/**\n * call adjustToFit on the selected layers and their children\n */\napp.adjustNested = function() {\n\tlet document = sketch.getSelectedDocument();\n\tlet layers = document.selectedLayers;\n\n\tlet results = app.adjustLayers(layers, true);\n\n\tsketch.UI.message(app.resultsString(results));\n};\n\n//private methods\n/**\n * Recursive functions to call adjustToFit on the given layers and return the results\n * @param [SketchLayer[]] layers - the layers to adjust\n * @param [boolean] nested - Whether this function should be called recursively for layers with children\n * @returns [object] The results\n */\napp.adjustLayers = function(layers, nested) {\n\tlet results = {};\n\n\tlayers.forEach((layer) => {\n\t\tlet layerResults = {};\n\n\t\tif(nested && layer.layers) {\n\t\t\tlet nestedResults = app.adjustLayers(layer.layers, nested);\n\n\t\t\tfor(let cat in nestedResults)\n\t\t\t\tif(nestedResults.hasOwnProperty(cat))\n\t\t\t\t\tlayerResults = nestedResults;\n\n\t\t\tdelete layerResults.failed;\n\t\t}\n\n\t\t//keep track of whether or not the height was changed\n\t\tlet oldHeight = layer.sketchObject.frame().height();\n\n\t\tlet result = app.adjustToFit(layer);\n\n\t\tlet newHeight = layer.sketchObject.frame().height();\n\n\t\t//group results by layer type, 'unaffected', or 'failed'\n\t\tlet cat = 'failed';\n\n\t\tif(result) {\n\t\t\tif(newHeight !== oldHeight)\n\t\t\t\tcat = layer.type.toLowerCase()\n\t\t\telse\n\t\t\t\tcat = 'unaffected';\n\t\t}\n\n\t\t//add selected layer to layerResults\n\t\tlayerResults[cat] = (layerResults[cat] + 1) || 1;\n\n\t\t//add layerResults to results\n\t\tfor(let cat in layerResults)\n\t\t\tif(layerResults.hasOwnProperty(cat))\n\t\t\t\tresults[cat] = (results[cat] + layerResults[cat]) || layerResults[cat];\n\t});\n\n\treturn results;\n};\n\n/**\n * Call adjustToFit on a layer and return the result\n * @param [SketchLayer] layer - the layer to adjust\n * @returns [boolean] whether or not the layer was adjusted\n */\napp.adjustToFit = function(layer) {\n\tif(layer.type !== 'Group' && layer.type !== 'Text' && layer.type !== 'Artboard')\n\t\treturn false;\n\n\tif(layer.type === 'Group' || layer.type === 'Artboard')\n\t\tlayer.adjustToFit();\n\telse\n\t\tapp.adjustTextToFit(layer);\n\n\treturn true;\n};\n\n/**\n * Adjust a textbot based on its contents\n * @param [SketchLayer] layer - the text layer to adjust\n */\napp.adjustTextToFit = function(layer) {\n\t//adjust y first for middle/bottom aligned text\n\tlet oldY = layer.sketchObject.frame().y();\n\tlet newY = oldY + layer.fragments[0].rect.y;\n\n\tlayer.sketchObject.frame().y = newY;\n\n\t//add up heights of all lines, set new height\n\tlet oldHeight = layer.sketchObject.frame().height();\n\tlet newHeight = layer.fragments.reduce((sum, frag) => (sum + frag.rect.height), 0);\n\n\tlayer.sketchObject.frame().height = newHeight;\n}\n\n/**\n * Build a string from a results object returned from #adjustLayers\n * @param [object] results - The results object to use\n * @returns [string] the results string\n */\napp.resultsString = function(results) {\n\t//this isn't ideal but it's easier than putting layer types in their own object\n\tlet numFailed = results.failed;\n\tdelete results.failed;\n\n\tlet numUnaffected = results.unaffected;\n\tdelete results.unaffected;\n\n\t//create an array of '# things' strings\n\tlet plurals = [];\n\n\tfor(let cat in results) {\n\t\tif(results.hasOwnProperty(cat)) {\n\t\t\tlet num = results[cat];\n\n\t\t\t//lazy\n\t\t\tif(cat === 'text') cat = 'text layer';\n\n\t\t\tplurals.push(util.pluralize(num, cat));\n\t\t}\n\t}\n\n\t//only show relevant parts, join with comma\n\tlet ret = [];\n\n\tif(plurals.length > 0) ret.push(`${util.commify(plurals)} adjusted successfully`);\n\tif(numUnaffected > 0) ret.push(`${util.pluralize(numUnaffected, 'layer')} unaffected`);\n\tif(numFailed > 0) ret.push(`${numFailed} failed`);\n\n\treturn ret.join(', ');\n};\n\n//done\nmodule.exports.adjustSelected = app.adjustSelected;\nmodule.exports.adjustNested = app.adjustNested;\n","var util = module.exports = {};\n\n/**\n * Add an 's' to a string if necessary\n * @param [number] num - the number of objects\n * @param [string] string - the name of the object\n * @returns [string] A string in the format of '<num> <string>/s'\n */\nutil.pluralize = function(num, string) {\n\tif(num > 1) string += 's';\n\n\treturn `${num} ${string}`;\n};\n\n/**\n * Add commas to an array of strings\n * @param [string[]] arr - the strings to commify\n * @returns [string] a commified string\n */\nutil.commify = function(arr) {\n\tswitch(arr.length) {\n\t\tcase 0:\n\t\t\treturn;\n\n\t\tcase 1:\n\t\t\treturn arr[0];\n\n\t\tcase 2:\n\t\t\treturn `${arr[0]} and ${arr[1]}`;\n\n\t\tdefault:\n\t\t\tlet last = arr.pop();\n\n\t\t\treturn arr.join(', ') + ` and ${last}`;\n\t}\n};","module.exports = require(\"sketch\");"],"sourceRoot":""}